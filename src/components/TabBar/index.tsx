import React from 'react'
import Taro from '@tarojs/taro'
import { View, Image, Text } from '@tarojs/components'
import './index.less'

import homeNormalIcon from '../../assets/home.svg'
import formIcon from '../../assets/form.svg'
import historyIcon from '../../assets/history.svg'
import userIcon from '../../assets/user.svg'

// const test = `<svg t="1751185127076" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="704" width="200" height="200"><path d="M895.946667 734.048l1.066666 1.013333a29.824 29.824 0 0 1 0 43.413334l-162.261333 152.96a31.925333 31.925333 0 0 1-22.762667 8.704 31.925333 31.925333 0 0 1-22.773333-8.704l-93.184-87.84a29.824 29.824 0 0 1 0-43.413334l1.077333-1.013333a32 32 0 0 1 43.904 0l70.976 66.901333 140.053334-132.021333a32 32 0 0 1 43.904 0zM768 85.333333c64.8 0 117.333333 52.533333 117.333333 117.333334v394.666666a32 32 0 0 1-64 0V202.666667a53.333333 53.333333 0 0 0-53.333333-53.333334H256a53.333333 53.333333 0 0 0-53.333333 53.333334v618.666666a53.333333 53.333333 0 0 0 53.333333 53.333334h234.666667a32 32 0 0 1 0 64H256c-64.8 0-117.333333-52.533333-117.333333-117.333334V202.666667c0-64.8 52.533333-117.333333 117.333333-117.333334zM554.666667 544a32 32 0 0 1 0 64H341.333333a32 32 0 0 1 0-64z m128-170.666667a32 32 0 0 1 0 64H341.333333a32 32 0 0 1 0-64z" fill="#000000" p-id="705" class="custom-cursor-on-hover"></path></svg>`

// // 简单的 SVG 图标（内联方式）
// const homeActiveIcon = `<svg t="1748501198291" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7685" width="200" height="200"><path d="M724.48 974.08h-128c-15.616 0-28.16-12.544-28.16-28.16v-217.856c0-10.24-8.704-18.944-18.944-18.944h-74.752c-10.24 0-18.944 8.704-18.944 18.944v217.856c0 15.616-12.544 28.16-28.16 28.16h-128c-54.528 0-99.072-41.472-99.072-92.672v-314.88H49.92c-11.52 0-21.76-6.912-26.112-17.408s-2.048-22.784 6.144-30.72L492.032 58.112c11.008-11.008 28.672-11.008 39.68 0l462.08 460.288c8.192 7.936 10.496 20.224 6.144 30.72s-14.592 17.408-26.112 17.408h-150.528v314.88c0.256 51.2-44.288 92.672-98.816 92.672z m-100.096-56.32h99.84c23.296 0 42.752-16.64 42.752-36.352v-343.04c0-15.616 12.544-28.16 28.16-28.16h110.592L512 117.76 118.016 510.208h110.592c15.616 0 28.16 12.544 28.16 28.16v343.04c0 19.712 19.712 36.352 42.752 36.352h99.84v-189.696c0-41.472 33.792-75.264 75.264-75.264h74.752c41.472 0 75.264 33.792 75.264 75.264v189.696z" p-id="7686" class="custom-cursor-on-hover" fill="#d81e06"></path></svg>`
// const homeNorma2lIcon = `<svg t="1748501198291" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7685" width="200" height="200"><path d="M724.48 974.08h-128c-15.616 0-28.16-12.544-28.16-28.16v-217.856c0-10.24-8.704-18.944-18.944-18.944h-74.752c-10.24 0-18.944 8.704-18.944 18.944v217.856c0 15.616-12.544 28.16-28.16 28.16h-128c-54.528 0-99.072-41.472-99.072-92.672v-314.88H49.92c-11.52 0-21.76-6.912-26.112-17.408s-2.048-22.784 6.144-30.72L492.032 58.112c11.008-11.008 28.672-11.008 39.68 0l462.08 460.288c8.192 7.936 10.496 20.224 6.144 30.72s-14.592 17.408-26.112 17.408h-150.528v314.88c0.256 51.2-44.288 92.672-98.816 92.672z m-100.096-56.32h99.84c23.296 0 42.752-16.64 42.752-36.352v-343.04c0-15.616 12.544-28.16 28.16-28.16h110.592L512 117.76 118.016 510.208h110.592c15.616 0 28.16 12.544 28.16 28.16v343.04c0 19.712 19.712 36.352 42.752 36.352h99.84v-189.696c0-41.472 33.792-75.264 75.264-75.264h74.752c41.472 0 75.264 33.792 75.264 75.264v189.696z" p-id="7686"></path></svg>`

// const formIcon = `<svg t="1748501425005" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8838" width="200" height="200"><path d="M895.946667 734.048l1.066666 1.013333a29.824 29.824 0 0 1 0 43.413334l-162.261333 152.96a31.925333 31.925333 0 0 1-22.762667 8.704 31.925333 31.925333 0 0 1-22.773333-8.704l-93.184-87.84a29.824 29.824 0 0 1 0-43.413334l1.077333-1.013333a32 32 0 0 1 43.904 0l70.976 66.901333 140.053334-132.021333a32 32 0 0 1 43.904 0zM768 85.333333c64.8 0 117.333333 52.533333 117.333333 117.333334v394.666666a32 32 0 0 1-64 0V202.666667a53.333333 53.333333 0 0 0-53.333333-53.333334H256a53.333333 53.333333 0 0 0-53.333333 53.333334v618.666666a53.333333 53.333333 0 0 0 53.333333 53.333334h234.666667a32 32 0 0 1 0 64H256c-64.8 0-117.333333-52.533333-117.333333-117.333334V202.666667c0-64.8 52.533333-117.333333 117.333333-117.333334zM554.666667 544a32 32 0 0 1 0 64H341.333333a32 32 0 0 1 0-64z m128-170.666667a32 32 0 0 1 0 64H341.333333a32 32 0 0 1 0-64z" fill="#000000" p-id="8839"></path></svg>`
// const historyIcon = `<svg t="1748501507197" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9889" width="200" height="200"><path d="M959.825022 191.939717C959.825022 121.2479 902.517291 63.940169 831.825474 63.940169H191.939717C121.2479 63.940169 63.940169 121.2479 63.940169 191.939717v639.885757C63.940169 902.517291 121.2479 959.825022 191.939717 959.825022h639.885757c70.691817 0 127.999548-57.307731 127.999548-127.999548V191.939717z m-63.940168 640.059154A63.835408 63.835408 0 0 1 831.912173 895.884854H192.087827c-17.112123 0-33.270563-6.574639-45.372232-18.67631S127.880338 849.110994 127.880338 831.998871V192.001129A64.236389 64.236389 0 0 1 192.087827 127.880338h639.824346A64.037705 64.037705 0 0 1 895.884854 192.001129v639.997742z" fill="" p-id="9890"></path><path d="M511.998194 192.001129c-176.73135 0-320.000677 143.269328-320.000678 320.000677s143.269328 320.000677 320.000678 320.000678 320.000677-143.269328 320.000677-320.000678-143.269328-320.000677-320.000677-320.000677z m256.060508 320.000677a254.568571 254.568571 0 0 1-43.710511 143.121218 256.988905 256.988905 0 0 1-112.708094 92.83968 255.641465 255.641465 0 0 1-242.755896-23.596451 256.992518 256.992518 0 0 1-92.839681-112.708094 255.641465 255.641465 0 0 1 23.596452-242.755896 256.992518 256.992518 0 0 1 112.708094-92.83968 255.641465 255.641465 0 0 1 242.755896 23.596451 256.988905 256.988905 0 0 1 92.83968 112.708094 254.395174 254.395174 0 0 1 20.11406 99.631066z" fill="" p-id="9891"></path><path d="M544.033302 498.64662V351.851551a31.970084 31.970084 0 0 0-63.940169 0v160.031045a31.970084 31.970084 0 0 0 9.356217 22.595805L617.365812 662.521299a31.970084 31.970084 0 1 0 45.231348-45.195223z" fill="" p-id="9892"></path></svg>`
// const userIcon = `<svg t="1748501546262" class="icon" viewBox="0 0 1025 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11715" width="200" height="200"><path d="M406.766493 519.191123C402.472299 519.191123 398.112041 518.365316 393.916945 516.581574 294.159525 474.432413 229.71359 377.185445 229.71359 268.872671 229.71359 120.623897 350.347396-0.00991 498.59617-0.00991 646.844945-0.00991 767.445719 120.623897 767.445719 268.872671 767.445719 373.849187 705.741461 469.873961 610.245203 513.509574 593.629977 521.073961 574.041848 513.806865 566.444428 497.224671 558.880041 480.609445 566.18017 461.021316 582.795396 453.456929 654.838751 420.523768 701.381203 348.050994 701.381203 268.872671 701.381203 157.025445 610.410364 66.054606 498.59617 66.054606 386.781977 66.054606 295.778106 157.025445 295.778106 268.872671 295.778106 350.594477 344.40159 423.92609 419.649074 455.736155 436.429461 462.83809 444.32417 482.228026 437.189203 499.041445 431.871009 511.626735 419.649074 519.191123 406.766493 519.191123" fill="#231814" p-id="11716"></path><path d="M673.71999 996.54689 673.686957 996.54689 103.087732 996.018374C67.148635 995.95231 34.413667 978.147923 15.519215 948.385858-2.714591 919.680826-4.960785 884.171148 9.44128 853.385084 59.485151 746.525729 190.623215 566.532955 506.708893 561.644181 831.614183 555.698374 949.803603 748.474632 991.325151 863.327794 1002.225796 893.486245 997.832506 925.989987 979.202312 952.547923 959.878441 980.096826 927.936248 996.54689 893.780893 996.54689L811.365409 996.54689C793.131603 996.54689 778.333151 981.781471 778.333151 963.514632 778.333151 945.247794 793.131603 930.482374 811.365409 930.482374L893.780893 930.482374C906.432248 930.482374 918.125667 924.536568 925.128506 914.62689 928.69599 909.50689 933.981151 899.002632 929.191474 885.756697 885.787086 765.750503 776.351215 623.282374 507.765925 627.708697 241.59199 631.837729 122.411603 767.930632 69.295732 881.396439 64.406957 891.768568 65.166699 903.296826 71.310699 912.975277 78.04928 923.578632 89.973925 929.920826 103.186828 929.953858L673.753022 930.482374C691.986828 930.515406 706.752248 945.280826 706.752248 963.547665 706.752248 981.781471 691.953796 996.54689 673.71999 996.54689" fill="#231814" p-id="11717"></path></svg>`

// 定义Tab项目接口
interface TabItem {
  title: string;
  iconActive: string;
  iconNormal: string;
  pagePath: string;
}

// 定义TabBar的Props接口
interface TabBarProps {
  current: number;
}

const tabs: TabItem[] = [
  {
    title: '首页',
    iconActive: homeNormalIcon,
    iconNormal: homeNormalIcon,
    pagePath: '/pages/index/index'
  },
  {
    title: '问卷',
    iconActive: formIcon,
    iconNormal: formIcon,
    pagePath: '/pages/userForm/index'
  },
  {
    title: '提交',
    iconActive: historyIcon,
    iconNormal: historyIcon,
    pagePath: '/pages/history/index'
  },
  {
    title: '我的',
    iconActive: userIcon,
    iconNormal: userIcon,
    pagePath: '/pages/profile/index'
  }
]

const TabBar: React.FC<TabBarProps> = ({ current }) => {
  const switchTab = (index: number) => {
    const tabItem = tabs[index]
    if (current !== index) {
      Taro.redirectTo({
        url: tabItem.pagePath
      })
    }
  }

  return (
    <View className='tab-bar'>
      {tabs.map((tab, index) => {
        const isActive = current === index
        return (
          <View 
            key={tab.title} 
            className={`tab-item ${isActive ? 'active' : ''}`}
            onClick={() => switchTab(index)}
          >
            <Image 
              className='tab-icon'
              src={isActive ? tab.iconActive : tab.iconNormal}
            />
            <Text className='tab-title'>{tab.title}</Text>
          </View>
        )
      })}
    </View>
  )
}

export default TabBar
